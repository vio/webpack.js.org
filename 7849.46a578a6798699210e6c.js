"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7849],{7849:function(e,a,t){t.r(a),t(7378);var n=t(2682);function o(){return(o=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function s({components:e,...a}){return(0,n.kt)("wrapper",o({components:e},a),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"ProgressPlugin")," provides a way to customize how progress is reported during a compilation."),(0,n.kt)("h2",{id:"usage"},"Usage",(0,n.kt)("a",{href:"#usage","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Create an instance of ",(0,n.kt)("inlineCode",{parentName:"p"},"ProgressPlugin")," and provide one of the allowed params."),(0,n.kt)("h3",{id:"providing-function"},"Providing ",(0,n.kt)("inlineCode",{parentName:"h3"},"function"),(0,n.kt)("a",{href:"#providing-function","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Provide a handler function which will be called when hooks report progress. ",(0,n.kt)("inlineCode",{parentName:"p"},"handler")," function arguments:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"percentage"),": a number between 0 and 1 indicating the completion percentage of the compilation"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"message"),": a short description of the currently-executing hook"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"...args"),": zero or more additional strings describing the current progress")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"handler")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"percentage",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," message",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," ",(0,n.kt)("span",{className:"token operator",parentName:"span"},"..."),"args"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// e.g. Output each progress message directly to the console:"),"\n  console",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"info"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"percentage",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," message",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"..."),"args",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"webpack",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),"ProgressPlugin"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"handler",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",{id:"providing-object"},"Providing ",(0,n.kt)("inlineCode",{parentName:"h3"},"object"),(0,n.kt)("a",{href:"#providing-object","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"When providing an ",(0,n.kt)("inlineCode",{parentName:"p"},"object")," to the ",(0,n.kt)("inlineCode",{parentName:"p"},"ProgressPlugin"),", following properties are supported:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"activeModules")," (",(0,n.kt)("inlineCode",{parentName:"li"},"boolean = false"),"): Shows active modules count and one active module in progress message."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"entries")," (",(0,n.kt)("inlineCode",{parentName:"li"},"boolean = true"),"): Shows entries count in progress message."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"handler")," (See ",(0,n.kt)("a",{href:"#providing-function",parentName:"li"},"Providing function"),")"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"modules")," (",(0,n.kt)("inlineCode",{parentName:"li"},"boolean = true"),"): Shows modules count in progress message."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"modulesCount")," (",(0,n.kt)("inlineCode",{parentName:"li"},"number = 5000"),"): A minimum modules count to start with. Takes effect when ",(0,n.kt)("inlineCode",{parentName:"li"},"modules")," property is enabled."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"profile")," (",(0,n.kt)("inlineCode",{parentName:"li"},"boolean = false"),"): Tells ",(0,n.kt)("inlineCode",{parentName:"li"},"ProgressPlugin")," to collect profile data for progress steps."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"dependencies")," (",(0,n.kt)("inlineCode",{parentName:"li"},"boolean = true"),"): Shows the count of dependencies in progress message."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"dependenciesCount")," (",(0,n.kt)("inlineCode",{parentName:"li"},"number = 10000"),"): A minimum dependencies count to start with. Takes effect when ",(0,n.kt)("inlineCode",{parentName:"li"},"dependencies")," property is enabled."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"percentBy")," (",(0,n.kt)("inlineCode",{parentName:"li"},"string = null: 'entries' | 'dependencies' | 'modules' | null"),"): Tells ",(0,n.kt)("inlineCode",{parentName:"li"},"ProgressPlugin")," how to calculate progress percentage.")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"webpack",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),"ProgressPlugin"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  activeModules",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  entries",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token function",parentName:"code"},"handler"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"percentage",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," message",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," ",(0,n.kt)("span",{className:"token operator",parentName:"span"},"..."),"args"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// custom logic"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  modules",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  modulesCount",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"5000"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  profile",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  dependencies",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  dependenciesCount",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"10000"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  percentBy",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"null"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",{id:"percentage-calculation"},"Percentage calculation",(0,n.kt)("a",{href:"#percentage-calculation","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"By default, progress percentage is calculated based on built modules count and total modules count: ",(0,n.kt)("inlineCode",{parentName:"p"},"built / total")),(0,n.kt)("p",null,"The total modules count is unknown in advance and changes during the build. This may cause inaccurate progress percentage."),(0,n.kt)("p",null,"To solve this problem ",(0,n.kt)("inlineCode",{parentName:"p"},"ProgressPlugin")," caches the last known total modules count and reuses this value on the next build. The first build will warm the cache but the following builds will use and update this value."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"We recommend using ",(0,n.kt)("inlineCode",{parentName:"p"},"percentBy: 'entries'")," setting for projects with ",(0,n.kt)("a",{href:"/configuration/entry-context/#entry",parentName:"p"},"multiple configured entry points"),". Percentage calculation will become more accurate because the amount of entry points is known in advance.")),(0,n.kt)("h2",{id:"supported-hooks"},"Supported Hooks",(0,n.kt)("a",{href:"#supported-hooks","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"The following hooks report progress information to ",(0,n.kt)("inlineCode",{parentName:"p"},"ProgressPlugin"),"."),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"tip"),(0,n.kt)("p",{parentName:"aside"},(0,n.kt)("em",{parentName:"p"},"Hooks marked with * allow plugins to report progress information using ",(0,n.kt)("inlineCode",{parentName:"em"},"reportProgress"),". For more, see ",(0,n.kt)("a",{href:"/api/plugins/#reporting-progress",parentName:"em"},"Plugin API: Reporting Progress")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Compiler")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"compilation"),(0,n.kt)("li",{parentName:"ul"},"emit*"),(0,n.kt)("li",{parentName:"ul"},"afterEmit*"),(0,n.kt)("li",{parentName:"ul"},"done")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Compilation")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"buildModule"),(0,n.kt)("li",{parentName:"ul"},"failedModule"),(0,n.kt)("li",{parentName:"ul"},"succeedModule"),(0,n.kt)("li",{parentName:"ul"},"finishModules*"),(0,n.kt)("li",{parentName:"ul"},"seal*"),(0,n.kt)("li",{parentName:"ul"},"optimizeDependenciesBasic*"),(0,n.kt)("li",{parentName:"ul"},"optimizeDependencies*"),(0,n.kt)("li",{parentName:"ul"},"optimizeDependenciesAdvanced*"),(0,n.kt)("li",{parentName:"ul"},"afterOptimizeDependencies*"),(0,n.kt)("li",{parentName:"ul"},"optimize*"),(0,n.kt)("li",{parentName:"ul"},"optimizeModulesBasic*"),(0,n.kt)("li",{parentName:"ul"},"optimizeModules*"),(0,n.kt)("li",{parentName:"ul"},"optimizeModulesAdvanced*"),(0,n.kt)("li",{parentName:"ul"},"afterOptimizeModules*"),(0,n.kt)("li",{parentName:"ul"},"optimizeChunksBasic*"),(0,n.kt)("li",{parentName:"ul"},"optimizeChunks*"),(0,n.kt)("li",{parentName:"ul"},"optimizeChunksAdvanced*"),(0,n.kt)("li",{parentName:"ul"},"afterOptimizeChunks*"),(0,n.kt)("li",{parentName:"ul"},"optimizeTree*"),(0,n.kt)("li",{parentName:"ul"},"afterOptimizeTree*"),(0,n.kt)("li",{parentName:"ul"},"optimizeChunkModulesBasic*"),(0,n.kt)("li",{parentName:"ul"},"optimizeChunkModules*"),(0,n.kt)("li",{parentName:"ul"},"optimizeChunkModulesAdvanced*"),(0,n.kt)("li",{parentName:"ul"},"afterOptimizeChunkModules*"),(0,n.kt)("li",{parentName:"ul"},"reviveModules*"),(0,n.kt)("li",{parentName:"ul"},"optimizeModuleOrder*"),(0,n.kt)("li",{parentName:"ul"},"advancedOptimizeModuleOrder*"),(0,n.kt)("li",{parentName:"ul"},"beforeModuleIds*"),(0,n.kt)("li",{parentName:"ul"},"moduleIds*"),(0,n.kt)("li",{parentName:"ul"},"optimizeModuleIds*"),(0,n.kt)("li",{parentName:"ul"},"afterOptimizeModuleIds*"),(0,n.kt)("li",{parentName:"ul"},"reviveChunks*"),(0,n.kt)("li",{parentName:"ul"},"optimizeChunkOrder*"),(0,n.kt)("li",{parentName:"ul"},"beforeChunkIds*"),(0,n.kt)("li",{parentName:"ul"},"optimizeChunkIds*"),(0,n.kt)("li",{parentName:"ul"},"afterOptimizeChunkIds*"),(0,n.kt)("li",{parentName:"ul"},"recordModules*"),(0,n.kt)("li",{parentName:"ul"},"recordChunks*"),(0,n.kt)("li",{parentName:"ul"},"beforeHash*"),(0,n.kt)("li",{parentName:"ul"},"afterHash*"),(0,n.kt)("li",{parentName:"ul"},"recordHash*"),(0,n.kt)("li",{parentName:"ul"},"beforeModuleAssets*"),(0,n.kt)("li",{parentName:"ul"},"beforeChunkAssets*"),(0,n.kt)("li",{parentName:"ul"},"additionalChunkAssets*"),(0,n.kt)("li",{parentName:"ul"},"record*"),(0,n.kt)("li",{parentName:"ul"},"additionalAssets*"),(0,n.kt)("li",{parentName:"ul"},"optimizeChunkAssets*"),(0,n.kt)("li",{parentName:"ul"},"afterOptimizeChunkAssets*"),(0,n.kt)("li",{parentName:"ul"},"optimizeAssets*"),(0,n.kt)("li",{parentName:"ul"},"afterOptimizeAssets*"),(0,n.kt)("li",{parentName:"ul"},"afterSeal*")),(0,n.kt)("h2",{id:"source"},"Source",(0,n.kt)("a",{href:"#source","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{href:"https://github.com/webpack/webpack/blob/master/lib/ProgressPlugin.js",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"ProgressPlugin")," source"))))}s.isMDXComponent=!0,a.default=s}}]);