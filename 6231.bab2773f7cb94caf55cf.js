"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6231],{6231:function(e,a,t){t.r(a),t(7378);var n=t(2682);function s(){return(s=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function o({components:e,...a}){return(0,n.kt)("wrapper",s({components:e},a),(0,n.kt)("p",null,"This guide contains some useful tips for improving build/compilation performance."),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"general"},"General",(0,n.kt)("a",{href:"#general","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"The following best practices should help, whether you're running build scripts in ",(0,n.kt)("a",{href:"/guides/development",parentName:"p"},"development")," or ",(0,n.kt)("a",{href:"/guides/production",parentName:"p"},"production"),"."),(0,n.kt)("h3",{id:"stay-up-to-date"},"Stay Up to Date",(0,n.kt)("a",{href:"#stay-up-to-date","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Use the latest webpack version. We are always making performance improvements. The latest recommended version of webpack is:"),(0,n.kt)("p",null,(0,n.kt)("a",{href:"https://github.com/webpack/webpack/releases",parentName:"p"},(0,n.kt)("img",{src:"https://img.shields.io/github/package-json/v/webpack/webpack.svg?label=webpack&style=flat-square&maxAge=3600",alt:"latest webpack version",parentName:"a"}))),(0,n.kt)("p",null,"Staying up-to-date with ",(0,n.kt)("strong",{parentName:"p"},"Node.js")," can also help with performance. On top of this, keeping your package manager (e.g. ",(0,n.kt)("inlineCode",{parentName:"p"},"npm")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"yarn"),") up-to-date can also help. Newer versions create more efficient module trees and increase resolving speed."),(0,n.kt)("h3",{id:"loaders"},"Loaders",(0,n.kt)("a",{href:"#loaders","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Apply loaders to the minimal number of modules necessary. Instead of:"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  module",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    rules",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        test",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/\\.js$/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        loader",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'babel-loader'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"Use the ",(0,n.kt)("inlineCode",{parentName:"p"},"include")," field to only apply the loader modules that actually need to be transformed by it:"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," path ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'path'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nmodule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  module",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    rules",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        test",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/\\.js$/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        include",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," path",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"resolve"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"__dirname",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'src'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        loader",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'babel-loader'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",{id:"bootstrap"},"Bootstrap",(0,n.kt)("a",{href:"#bootstrap","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Each additional loader/plugin has a bootup time. Try to use as few tools as possible."),(0,n.kt)("h3",{id:"resolving"},"Resolving",(0,n.kt)("a",{href:"#resolving","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"The following steps can increase resolving speed:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Minimize the number of items in ",(0,n.kt)("inlineCode",{parentName:"li"},"resolve.modules"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"resolve.extensions"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"resolve.mainFiles"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"resolve.descriptionFiles"),", as they increase the number of filesystem calls."),(0,n.kt)("li",{parentName:"ul"},"Set ",(0,n.kt)("inlineCode",{parentName:"li"},"resolve.symlinks: false")," if you don't use symlinks (e.g. ",(0,n.kt)("inlineCode",{parentName:"li"},"npm link")," or ",(0,n.kt)("inlineCode",{parentName:"li"},"yarn link"),")."),(0,n.kt)("li",{parentName:"ul"},"Set ",(0,n.kt)("inlineCode",{parentName:"li"},"resolve.cacheWithContext: false")," if you use custom resolving plugins, that are not context specific.")),(0,n.kt)("h3",{id:"dlls"},"Dlls",(0,n.kt)("a",{href:"#dlls","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Use the ",(0,n.kt)("inlineCode",{parentName:"p"},"DllPlugin")," to move code that is changed less often into a separate compilation. This will improve the application's compilation speed, although it does increase complexity of the build process."),(0,n.kt)("h3",{id:"smaller--faster"},"Smaller = Faster",(0,n.kt)("a",{href:"#smaller--faster","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Decrease the total size of the compilation to increase build performance. Try to keep chunks small."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Use fewer/smaller libraries."),(0,n.kt)("li",{parentName:"ul"},"Use the ",(0,n.kt)("inlineCode",{parentName:"li"},"SplitChunksPlugin")," in Multi-Page Applications."),(0,n.kt)("li",{parentName:"ul"},"Use the ",(0,n.kt)("inlineCode",{parentName:"li"},"SplitChunksPlugin")," in ",(0,n.kt)("inlineCode",{parentName:"li"},"async")," mode in Multi-Page Applications."),(0,n.kt)("li",{parentName:"ul"},"Remove unused code."),(0,n.kt)("li",{parentName:"ul"},"Only compile the part of the code you are currently developing on.")),(0,n.kt)("h3",{id:"worker-pool"},"Worker Pool",(0,n.kt)("a",{href:"#worker-pool","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"thread-loader")," can be used to offload expensive loaders to a worker pool."),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"warning"),(0,n.kt)("p",{parentName:"aside"},"Don't use too many workers, as there is a boot overhead for the Node.js runtime and the loader. Minimize the module transfers between worker and main process. IPC is expensive.")),(0,n.kt)("h3",{id:"persistent-cache"},"Persistent cache",(0,n.kt)("a",{href:"#persistent-cache","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Use ",(0,n.kt)("a",{href:"/configuration/cache",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"cache"))," option in webpack configuration. Clear cache directory on ",(0,n.kt)("inlineCode",{parentName:"p"},'"postinstall"')," in ",(0,n.kt)("inlineCode",{parentName:"p"},"package.json"),"."),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"tip"),(0,n.kt)("p",{parentName:"aside"},"We support yarn PnP version 3 ",(0,n.kt)("a",{href:"https://yarnpkg.com/features/pnp",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"yarn 2 berry"))," for persistent caching.")),(0,n.kt)("h3",{id:"custom-pluginsloaders"},"Custom plugins/loaders",(0,n.kt)("a",{href:"#custom-pluginsloaders","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Profile them to not introduce a performance problem here."),(0,n.kt)("h3",{id:"progress-plugin"},"Progress plugin",(0,n.kt)("a",{href:"#progress-plugin","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"It is possible to shorten build times by removing ",(0,n.kt)("inlineCode",{parentName:"p"},"ProgressPlugin")," from webpack's configuration. Keep in mind, ",(0,n.kt)("inlineCode",{parentName:"p"},"ProgressPlugin")," might not provide as much value for fast builds as well, so make sure you are leveraging the benefits of using it."),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"development"},"Development",(0,n.kt)("a",{href:"#development","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"The following steps are especially useful in ",(0,n.kt)("em",{parentName:"p"},"development"),"."),(0,n.kt)("h3",{id:"incremental-builds"},"Incremental Builds",(0,n.kt)("a",{href:"#incremental-builds","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Use webpack's watch mode. Don't use other tools to watch your files and invoke webpack. The built-in watch mode will keep track of timestamps and passes this information to the compilation for cache invalidation."),(0,n.kt)("p",null,"In some setups, watching falls back to polling mode. With many watched files, this can cause a lot of CPU load. In these cases, you can increase the polling interval with ",(0,n.kt)("inlineCode",{parentName:"p"},"watchOptions.poll"),"."),(0,n.kt)("h3",{id:"compile-in-memory"},"Compile in Memory",(0,n.kt)("a",{href:"#compile-in-memory","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"The following utilities improve performance by compiling and serving assets in memory rather than writing to disk:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"webpack-dev-server")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"webpack-hot-middleware")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"webpack-dev-middleware"))),(0,n.kt)("h3",{id:"statstojson-speed"},"stats.toJson speed",(0,n.kt)("a",{href:"#statstojson-speed","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Webpack 4 outputs a large amount of data with its ",(0,n.kt)("inlineCode",{parentName:"p"},"stats.toJson()")," by default. Avoid retrieving portions of the ",(0,n.kt)("inlineCode",{parentName:"p"},"stats")," object unless necessary in the incremental step. ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack-dev-server")," after v3.1.3 contained a substantial performance fix to minimize the amount of data retrieved from the ",(0,n.kt)("inlineCode",{parentName:"p"},"stats")," object per incremental build step."),(0,n.kt)("h3",{id:"devtool"},"Devtool",(0,n.kt)("a",{href:"#devtool","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Be aware of the performance differences between the different ",(0,n.kt)("inlineCode",{parentName:"p"},"devtool")," settings."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},'"eval"')," has the best performance, but doesn't assist you for transpiled code."),(0,n.kt)("li",{parentName:"ul"},"The ",(0,n.kt)("inlineCode",{parentName:"li"},"cheap-source-map")," variants are more performant if you can live with the slightly worse mapping quality."),(0,n.kt)("li",{parentName:"ul"},"Use a ",(0,n.kt)("inlineCode",{parentName:"li"},"eval-source-map")," variant for incremental builds.")),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"tip"),(0,n.kt)("p",{parentName:"aside"},"In most cases, ",(0,n.kt)("inlineCode",{parentName:"p"},"eval-cheap-module-source-map")," is the best option.")),(0,n.kt)("h3",{id:"avoid-production-specific-tooling"},"Avoid Production Specific Tooling",(0,n.kt)("a",{href:"#avoid-production-specific-tooling","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Certain utilities, plugins, and loaders only make sense when building for production. For example, it usually doesn't make sense to minify and mangle your code with the ",(0,n.kt)("inlineCode",{parentName:"p"},"TerserPlugin")," while in development. These tools should typically be excluded in development:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"TerserPlugin")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"[fullhash]"),"/",(0,n.kt)("inlineCode",{parentName:"li"},"[chunkhash]"),"/",(0,n.kt)("inlineCode",{parentName:"li"},"[contenthash]")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"AggressiveSplittingPlugin")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"AggressiveMergingPlugin")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ModuleConcatenationPlugin"))),(0,n.kt)("h3",{id:"minimal-entry-chunk"},"Minimal Entry Chunk",(0,n.kt)("a",{href:"#minimal-entry-chunk","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Webpack only emits updated chunks to the filesystem. For some configuration options, (HMR, ",(0,n.kt)("inlineCode",{parentName:"p"},"[name]"),"/",(0,n.kt)("inlineCode",{parentName:"p"},"[chunkhash]"),"/",(0,n.kt)("inlineCode",{parentName:"p"},"[contenthash]")," in ",(0,n.kt)("inlineCode",{parentName:"p"},"output.chunkFilename"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"[fullhash]"),") the entry chunk is invalidated in addition to the changed chunks."),(0,n.kt)("p",null,"Make sure the entry chunk is cheap to emit by keeping it small. The following configuration creates an additional chunk for the runtime code, so it's cheap to generate:"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    runtimeChunk",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",{id:"avoid-extra-optimization-steps"},"Avoid Extra Optimization Steps",(0,n.kt)("a",{href:"#avoid-extra-optimization-steps","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Webpack does extra algorithmic work to optimize the output for size and load performance. These optimizations are performant for smaller codebases, but can be costly in larger ones:"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  optimization",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    removeAvailableModules",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    removeEmptyChunks",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    splitChunks",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",{id:"output-without-path-info"},"Output Without Path Info",(0,n.kt)("a",{href:"#output-without-path-info","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Webpack has the ability to generate path info in the output bundle. However, this puts garbage collection pressure on projects that bundle thousands of modules. Turn this off in the ",(0,n.kt)("inlineCode",{parentName:"p"},"options.output.pathinfo")," setting:"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    pathinfo",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",{id:"nodejs-versions-8910-9111"},"Node.js Versions 8.9.10-9.11.1",(0,n.kt)("a",{href:"#nodejs-versions-8910-9111","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"There was a ",(0,n.kt)("a",{href:"https://github.com/nodejs/node/issues/19769",parentName:"p"},"performance regression")," in Node.js versions 8.9.10 - 9.11.1 in the ES2015 ",(0,n.kt)("inlineCode",{parentName:"p"},"Map")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"Set")," implementations. Webpack uses those data structures liberally, so this regression affects compile times."),(0,n.kt)("p",null,"Earlier and later Node.js versions are not affected."),(0,n.kt)("h3",{id:"typescript-loader"},"TypeScript Loader",(0,n.kt)("a",{href:"#typescript-loader","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"To improve the build time when using ",(0,n.kt)("inlineCode",{parentName:"p"},"ts-loader"),", use the ",(0,n.kt)("inlineCode",{parentName:"p"},"transpileOnly")," loader option. On its own, this option turns off type checking. To gain type checking again, use the ",(0,n.kt)("a",{href:"https://www.npmjs.com/package/fork-ts-checker-webpack-plugin",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"ForkTsCheckerWebpackPlugin")),". This speeds up TypeScript type checking and ESLint linting by moving each to a separate process."),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  test",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/\\.tsx?$/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  use",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      loader",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'ts-loader'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      options",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        transpileOnly",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"tip"),(0,n.kt)("p",{parentName:"aside"},"There is a ",(0,n.kt)("a",{href:"https://github.com/TypeStrong/ts-loader/tree/master/examples/fork-ts-checker-webpack-plugin",parentName:"p"},"full example")," on the ",(0,n.kt)("inlineCode",{parentName:"p"},"ts-loader")," GitHub repository.")),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"production"},"Production",(0,n.kt)("a",{href:"#production","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"The following steps are especially useful in ",(0,n.kt)("em",{parentName:"p"},"production"),"."),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"warning"),(0,n.kt)("p",{parentName:"aside"},(0,n.kt)("strong",{parentName:"p"},"Don't sacrifice the quality of your application for small performance gains!")," Keep in mind that optimization quality is, in most cases, more important than build performance.")),(0,n.kt)("h3",{id:"source-maps"},"Source Maps",(0,n.kt)("a",{href:"#source-maps","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Source maps are really expensive. Do you really need them?"),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"specific-tooling-issues"},"Specific Tooling Issues",(0,n.kt)("a",{href:"#specific-tooling-issues","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"The following tools have certain problems that can degrade build performance:"),(0,n.kt)("h3",{id:"babel"},"Babel",(0,n.kt)("a",{href:"#babel","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Minimize the number of preset/plugins")),(0,n.kt)("h3",{id:"typescript"},"TypeScript",(0,n.kt)("a",{href:"#typescript","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Use the ",(0,n.kt)("inlineCode",{parentName:"li"},"fork-ts-checker-webpack-plugin")," for typechecking in a separate process."),(0,n.kt)("li",{parentName:"ul"},"Configure loaders to skip typechecking."),(0,n.kt)("li",{parentName:"ul"},"Use the ",(0,n.kt)("inlineCode",{parentName:"li"},"ts-loader")," in ",(0,n.kt)("inlineCode",{parentName:"li"},"happyPackMode: true")," / ",(0,n.kt)("inlineCode",{parentName:"li"},"transpileOnly: true"),".")),(0,n.kt)("h3",{id:"sass"},"Sass",(0,n.kt)("a",{href:"#sass","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"node-sass")," has a bug which blocks threads from the Node.js thread pool. When using it with the ",(0,n.kt)("inlineCode",{parentName:"li"},"thread-loader")," set ",(0,n.kt)("inlineCode",{parentName:"li"},"workerParallelJobs: 2"),".")))}o.isMDXComponent=!0,a.default=o}}]);